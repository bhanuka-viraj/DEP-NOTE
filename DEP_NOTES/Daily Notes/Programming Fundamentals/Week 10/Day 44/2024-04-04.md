
|                                           | Buffers - Continue IO                                                                                       |
| ----------------------------------------- | ----------------------------------------------------------------------------------------------------------- |
| What is the use of<br>Arrays.fill(  )<br> | To replace the element of array by a certain number<br><br>This can be used with array list too.<br><br>see |
|                                           |                                                                                                             |

A use case of Arrays.fill ( ) in file operations

```
try (FileInputStream fis1 = new FileInputStream(file)) {  
    byte[] byteBuffer = new byte[1024];  
    while (fis1.read(byteBuffer) != -1) {  
        System.out.println(Arrays.toString(byteBuffer));  
        Arrays.fill(byteBuffer,(byte) 0);  
        // To replace the previous value of the array.  
        // Since the array is created outside from the loop array contains the values        // of previous iterations.   
          
}  
}
```


|                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| --------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| What is the difference<br>between read( ) int and <br>read(byte [ ] buffer) : int | 1.There is a difference in return value in both cases. <br>(see the previous day notes)<br><br>2. read( ) method can get only one byte from the file<br>system once. But read(byte [ ]) method can get a <br>array of a byte. Our application is in the ram. File is <br>in the hard. It is not a speed process getting data from<br>hard to ram. in read( ) method once take only one <br>byte from the file to ram . But using <br>read (byte [ ]) method it allow to take a byte array <br>from the file.So read(byte [ ]) has best performance<br><br>![[Pasted image 20240405081659.png]]<br><br>**Reading byte by byte is not efficient, getting more number of bytes at once is more efficient**<br><br>This case is also applicable for write( ) and write( byte [ ])                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ==What is the default<br>size of buffer stream==                                  | 8kb..                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ==What is the buffer stream==                                                     | In Java, a buffer stream refers to a stream that adds buffering functionality to an underlying input or output stream.<br><br>Buffer stream is created based on read (byte [ ])<br><br>There are two buffered streams<br>1.Buffered Input Streams <br>2. Buffered Output Streams                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| How does the buffer <br>input stream works                                        | <br>When use the read( ) method buffer get the 8kb  from the hard.Then issue the data from buffer when  asked to read the data.The buffer has a threshold. (threshold value is not documented) When the data  is getting lower in the buffer, it get  data again from the file and fill with bytes before it comes empty.With this proccess contact between  hard and ram is reduced. This is the reason this has a higher performance<br><br>Enhanced Answer from chatGpt -> <br><br>"The buffered input stream in Java operates by fetching a chunk of data (typically 8KB) from the underlying input source, such as a file, and storing it in memory. This buffer serves as a temporary holding area for data read operations. As data is requested, it's retrieved from the buffer rather than directly from the input source, reducing the frequency of disk reads and improving performance. When the buffer's contents fall below a certain threshold, more data is fetched from the input source to refill the buffer. By minimizing the number of disk reads and optimizing the transfer of data between the hard drive and RAM, buffered input streams offer higher performance compared to unbuffered streams."<br><br>![[Pasted image 20240404131511.png]]<br> |
| How does the buffer<br>output stream works                                        | <br>When use the write( ) method buffer get the byte  from the application. It won't send the byte one bye.  Buffer send the data to the file when the buffer is  full.It  won't send data until buffer is not full. (due to this there would be a latency for the update)<br>Using flush( ) method it allow to send the data from file to hard when we require  even the buffer is not full.<br><br>Enhanced answer by chatGpt -><br><br>"When data is written using a buffered output stream in Java, it's first stored in memory rather than being immediately sent to the underlying output destination like a file or network socket. The buffer accumulates bytes until it's full, at which point the entire buffer is flushed out in one operation, reducing the frequency of disk or network I/O, thus improving efficiency. However, this buffering introduces a slight delay, or latency, as data accumulates in the buffer. The `flush()` method allows us to bypass this delay by forcing the buffered data to be written out immediately, ensuring that any pending data is sent to the output destination without waiting for the buffer to fill."<br><br>![[Pasted image 20240404131542.png]]                                                                |
| What is the flush( )<br>method in <br>buffered output stream                      | To send the byte in buffer to the file explicitly.<br><br>Enhanced answer by chatGpt -><br><br>The `flush()` method in a buffered output stream is used to ensure that any buffered data is forcefully written to the underlying output destination, such as a file. Normally, the buffered output stream automatically flushes its contents to the file when the buffer is full or when the stream is closed. However, calling `flush()` explicitly can be useful in situations where you want to ensure that data is immediately written to the output, regardless of the buffer's current state. This can be important in scenarios where timely data persistence is required, such as logging or real-time data transmission. Additionally, flushing the stream can help avoid data loss in the event of unexpected program termination or system failure.                                                                                                                                                                                                                                                                                                                                                                                                              |
| What is the stream chain                                                          | File input stream  is wrapped up using Buffered Input Stream<br>(this is the same for the outputstreams)<br><br>Enhanced Answer from chatGpt -><br><br>The stream chain refers to wrapping one stream with another to enhance functionality or performance. For example, a FileInputStream can be wrapped with a BufferedInputStream for efficient reading, while a FileOutputStream can be wrapped with a BufferedOutputStream for optimized writing.<br><br>![[Pasted image 20240404121732.png]]<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| What is need<br>to be closed<br>in stream chain                                   | The Buffered stream is need to close( the stream in the outside)<br><br><br>in the case of output streams -> <br>When the buffered stream is closed automatically flush                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| What is the start size of the <br>buffer                                          | Default buffer size is 8kb<br><br>But buffer is size is starts from 512 byts. When it is filled the size of the buffer is increased up to 8kb. When it reach to 8kb then start to send the bytes to the fie                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| What is the use of ->                                                             | system.nanoTime( )<br>System.currentTimeMillis( )<br><br>to take the time stamp                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| What are the three ways<br>that buffered<br>can be flushed                        | 1.When the buffer is filled<br>2.When using the flush( ) method<br>3. When the stream is closed                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Is it necessary<br>to use buffer<br>every time                                    | it is not a good practice to use buffer when the files size are <br>very small (byte size files)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| What does mean the plain<br>files                                                 | When the bytes are not structured in specified way. it is called plain files.<br><br>Palin text files, xml files, HTML files.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
Reading a file using Buffered Input Stream

```
try (BufferedInputStream bis = new BufferedInputStream(new FileInputStream(file))) {  
    int read;  
    while ((read = bis.read()) != -1) {  
        System.out.println(read);  
    }  
}
```

|                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ==What is the use<br>of FileReader and<br>fileWirter== | ==These methods only works with plain files.==<br><br>It is not need to convert the byte to char when use with <br>these methods<br><br>When these are used with FileReader and FileWrter it allows<br>to works with string lines<br><br>Enhanced Answer from chatGpt -> <br><br>FileReader and FileWriter are Java I/O classes used to read and write character-based data from and to plain text files, respectively. They simplify working with text files by handling character encoding and providing methods to read and write data line by line. Unlike InputStream and OutputStream, FileReader and FileWriter automatically convert bytes to characters, making them suitable for processing text data directly.<br> |
|                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
File Reader allows to works with string lines
```
try (BufferedReader bis = new BufferedReader(new FileReader(file))) {
            //when uses buffered reader , chars returned from filereader  are stored in array .so we can directly get a string out of that
            String line;
            while ((line = bis.readLine()) != null) {
                System.out.println(line);
            }
        }
```

File Writers allows to works with String lines

```
public static void main(String[] args) throws IOException {  
    File file = new File("dep12.txt");  
  
    try (BufferedWriter bw = new BufferedWriter(new FileWriter(file))) {  
        bw.write("Hello! \n");  
        bw.write("Direct Entry Program\n");  
        bw.write("We can now write String \n");  
    }  
}
```

Explain this image -> Class Hierarchy of Inputs
![[Pasted image 20240405090449.png]]

|                                                         |                                                      |
| ------------------------------------------------------- | ---------------------------------------------------- |
| Input Streams                                           | Read Bytes                                           |
| Input Stream Reader                                     | make the bridge between bytes and characters         |
| File Reader                                             | convert plain text files to characters               |
| BufferedInput Strem                                     | To enhance the performance of FileInput stream       |
| FilterInput Stream                                      | filter the byte input streams                        |
| File Inputs and <br>Buffered input works<br>with =>     | works with bytes                                     |
| File Reader works <br>with  =>                          | Characters                                           |
| Buffered Reader<br>works with =>                        | Strings (Because charactes are stored in the buffer) |
| How to get the main<br>structure of the <br>source file | ctr + f12                                            |
| [[Serializable]]                                        |                                                      |

 Class Hierarchy of Outputs
 
![[Pasted image 20240419154641.png]]
